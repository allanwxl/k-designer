import{R as B,K as x,P as C}from"./index-b8b964c9.8f77b590.js";import{e as q,r as P,w as N,o as r,c as u,b as i,M as c,X as f,d as V,q as R,O as D,u as w,P as U,F as j,v as E,f as k,j as I}from"../app.f47f61a8.js";const M={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},A={key:0,class:"flex m-t-2 first:m-0"},K={class:"attr-label",title:"\u6821\u9A8C\u65F6\u673A"},L={class:"attr-input"},O=i("span",{class:"iconfont icon-shanchu1"},null,-1),S=[O],T=q({__name:"ERuleItem",props:{rule:{}},emits:["change","delete","update:rule"],setup(b,{emit:s}){const v=b,a=k({get(){return v.rule},set(e){s("update:rule",e)}}),o=I("pageManager",{}),h=k(()=>Object.entries(o.funcs.value).filter(([e,n])=>typeof n=="function").map(([e])=>({label:e,value:e}))),l=["string","number","url","array","email"],g=[{label:"change",value:"change"},{label:"blur",value:"blur"}],m=[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"method",value:"method"},{label:"regexp",value:"regexp"},{label:"integer",value:"integer"},{label:"float",value:"float"},{label:"array",value:"array"},{label:"object",value:"object"},{label:"date",value:"date"},{label:"url",value:"url"},{label:"hex",value:"hex"},{label:"email",value:"email"},{label:"any",value:"any"}],y=[{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",componentProps:{options:g,placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"switch",label:"\u81EA\u5B9A\u4E49\u89C4\u5219",model:"isValidator"},{type:"select",label:"\u6821\u9A8C\u51FD\u6570",model:"validator",show(){return!!a.value.isValidator},componentProps:{options:h.value,placeholder:"\u6821\u9A8C\u51FD\u6570"}},{type:"select",label:"\u7C7B\u578B",model:"type",show(){return!a.value.isValidator},componentProps:{options:m,placeholder:"\u7C7B\u578B"}},{type:"input",label:"\u6B63\u5219\u6821\u9A8C",model:"pattern",show(){return!a.value.isValidator},componentProps:{placeholder:"\u6B63\u5219\u6821\u9A8C"}},{type:"number",label:"\u5B57\u6BB5\u957F\u5EA6",model:"len",show(){var e;return l.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u5B57\u6BB5\u957F\u5EA6"}},{type:"number",label:"\u6700\u5C0F\u957F\u5EA6",model:"min",show(){var e;return l.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5C0F\u957F\u5EA6"}},{type:"number",label:"\u6700\u5927\u957F\u5EA6",model:"max",show(){var e;return l.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5927\u957F\u5EA6"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}];function d(){const e=a.value;e.isValidator?(delete e.type,delete e.pattern,delete e.len,delete e.min,delete e.max):delete e.validator,s("change",e)}function p(){s("delete")}return(e,n)=>(r(),u("div",M,[(r(),u(c,null,f(y,(t,F)=>(r(),u(c,{key:F},[!t.show||t.show()?(r(),u("div",A,[i("div",K,U(t.label),1),i("div",L,[V(w(C),{modelValue:a.value[t.model],"onUpdate:modelValue":_=>a.value[t.model]=_,record:{...t,noFormItem:!0},onChange:d},null,8,["modelValue","onUpdate:modelValue","record"])])])):j("",!0)],64))),64)),i("div",{class:"rule-btn-delete absolute top-0 right-0 transition-all w-6 h-6 cursor-pointer rounded-bl-1 flex-center color-white",onClick:p},S)]))}}),z={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},G={key:0,class:"flex m-t-2 first:m-0"},H={class:"attr-label"},J={class:"flex-1"},Q=q({__name:"index",props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup(b,{emit:s}){const v=b,a=B.getComponent("button"),o=P({required:!1,message:"\u5FC5\u586B\u9879",trigger:["change"]}),h=[{type:"switch",label:"\u5FC5\u586B\u9879",model:"required"},{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",show(){return!!o.value.required},componentProps:{options:[{label:"change",value:"change"},{label:"blur",value:"blur"}],placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",show(){return!!o.value.required},componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}],l=P([]);N(()=>v.modelValue,d=>{if(d){if(!d)return;l.value=[],d.forEach(p=>{typeof p.required<"u"?o.value=p:l.value.push(p)})}},{immediate:!0});function g(){l.value.push({message:"",trigger:["change"]}),m()}function m(){if(o.value.required){s("update:modelValue",x([...l.value,o.value]));return}if(l.value.length){s("update:modelValue",x(l.value));return}s("update:modelValue",void 0)}function y(d){l.value.splice(d,1),m()}return(d,p)=>(r(),u("div",null,[i("div",z,[(r(),u(c,null,f(h,(e,n)=>(r(),u(c,{key:n},[!e.show||e.show()?(r(),u("div",G,[i("div",H,U(e.label),1),i("div",J,[V(w(C),{modelValue:o.value[e.model],"onUpdate:modelValue":t=>o.value[e.model]=t,record:{...e,noFormItem:!0},onChange:m},null,8,["modelValue","onUpdate:modelValue","record"])])])):j("",!0)],64))),64))]),(r(!0),u(c,null,f(l.value,(e,n)=>(r(),E(T,{key:n,rule:l.value[n],"onUpdate:rule":t=>l.value[n]=t,onDelete:t=>y(n),onChange:m},null,8,["rule","onUpdate:rule","onDelete"]))),128)),V(w(a),{class:"m-t-2",onClick:g},{default:R(()=>[D(" \u6DFB\u52A0\u89C4\u5219 ")]),_:1})]))}});export{Q as default};
