import{e as y,j as d,h as k,p as P,f as C,r as V,w as D,o as r,c as u,L as N,W as j,D as M,E as S,a as c,O as T,b as B,u as p,n as L,M as _}from"../app.88701f9d.js";import{R as x,j as E,P as F,M as v,T as I}from"./index-b8b964c9.fce975b8.js";const R={class:"epic-attribute-view"},U=["title"],z={class:"attr-input"},W=y({__name:"attributeView",setup(A){const l=d("designer"),m=d("pageSchema"),f=k({});P("formData",f);const h=x.getComponentConfings(),t=C(()=>l.state.checkedNode);function b(a){var o;return typeof a.show=="boolean"?a.show:typeof a.show=="function"?(o=a.show)==null?void 0:o.call(a,{values:t.value}):!0}const i=V([]);D(()=>{var a;return(a=l.state.checkedNode)==null?void 0:a.type},()=>{var n;var a,o;const e=(a=l.state.checkedNode)==null?void 0:a.type;if(!e)return[];const s=(n=(o=h[e])==null?void 0:o.config.attribute)!=null?n:[];i.value=[{label:"\u7EC4\u4EF6ID",type:"input",field:"id",componentProps:{disabled:!0}},...s]},{immediate:!0});function g(a,o,e){typeof e.onChange=="function"&&e.onChange({value:a,values:t.value,componentAttributes:i}),e.changeSync?v(a,o,t.value):_(()=>{v(a,o,t.value)}),I.push(m.schemas,"\u7F16\u8F91\u7EC4\u4EF6\u5C5E\u6027")}return(a,o)=>(r(),u("aside",R,[(r(!0),u(N,null,j(i.value,e=>{var s,n;return r(),u("div",{key:e.field+((s=t.value)==null?void 0:s.id)},[M(c("div",{class:L(["attr-item",e.layout])},[c("div",{class:"attr-label",title:e.label},T(e.label),9,U),c("div",z,[B(p(F),{record:{...e,componentProps:{...e.componentProps,...e.field==="componentProps.defaultValue"?(n=t.value)==null?void 0:n.componentProps:{},hidden:!1},show:!0,noFormItem:!0},"model-value":p(E)(e.field,t.value),"onUpdate:modelValue":w=>g(w,e.field,e)},null,8,["record","model-value","onUpdate:modelValue"])])],2),[[S,b(e)]])])}),128))]))}});export{W as default};
