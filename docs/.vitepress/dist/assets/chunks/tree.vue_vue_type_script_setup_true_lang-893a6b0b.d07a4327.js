import{R as F}from"./index-9f785207.e6578421.js";import{e as x,i as R,p as u,r as V,f as B,o as l,c as a,M as N,X as b,v as S,j as i,R as k,U as j,b as E,n as K,F as C,d as z,u as A}from"../app.f47f61a8.js";const L={class:"epic-tree-node"},M=E("span",{class:"iconfont icon-zhankai"},null,-1),P=[M],q=x({name:"ETreeNode",__name:"treeNode",props:{record:{}},setup(f){const e=f,o=i("slots",{}),n=i("expandedKeys"),m=i("treeProps"),p=i("selectedKeys"),h=i("handleSelect"),t=B(()=>{var r;return n.value.includes((r=e.record.id)!=null?r:"")}),y=x({setup(){return()=>{var s;var r;return k("span",{class:{text:!0,hover:m.hoverKey===e.record.id,checked:p.value.includes(e.record.id)},onClick:()=>h(e.record.id,e.record)},(s=(r=o["tree-node"])==null?void 0:r.call(o,e))!=null?s:k("span",{class:"text-padding"},{default:()=>{var c;var d;return[(c=e.record.label)!=null?c:(d=F.getComponentConfingByType(e.record.type))==null?void 0:d.defaultSchema.label,k("span",{class:"epic-node-type-text"},e.record.type)]}}))}}});function v(){const r=e.record.id;if(!r)return!1;n.value.includes(r)?n.value=n.value.filter(s=>s!==r):n.value.push(r)}function T(){var r;const s=e.record.id;if(!s||!((r=e.record.children)!=null&&r.length))return!1;n.value.push(s)}return T(),(r,s)=>{var d,c;const _=j("ETreeNode");return l(),a("li",L,[E("a",null,[(d=e.record.children)!=null&&d.length?(l(),a("span",{key:0,class:K(["icon-expanded",{expanded:t.value}]),onClick:v},P,2)):C("",!0),z(A(y))]),(c=e.record.children)!=null&&c.length?(l(),a("ul",{key:0,class:K(["epic-tree-sublist",{expanded:t.value}])},[(l(!0),a(N,null,b(e.record.children,g=>(l(),S(_,{key:g.id,record:g},null,8,["record"]))),128))],2)):C("",!0)])}}}),w={class:"epic-tree-main"},X=x({name:"ETree",__name:"tree",props:{options:{type:Array,default:()=>[]},hoverKey:{type:String,default:""},selectedKeys:{type:Array,default:()=>[]}},emits:["update:selectedKeys","node-click"],setup(f,{emit:e}){const o=f,n=R();u("slots",n);const m=V([]),p=B({get(){return o.selectedKeys},set(t){e("update:selectedKeys",t)}});function h(t,y){p.value=[t],e("node-click",{id:t,record:y})}return u("expandedKeys",m),u("selectedKeys",p),u("treeProps",o),u("handleSelect",h),(t,y)=>(l(),a("ul",w,[(l(!0),a(N,null,b(o.options,v=>(l(),S(q,{key:v.id,record:v},null,8,["record"]))),128))]))}});export{X as H};
