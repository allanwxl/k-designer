import{R as j}from"./index-b8b964c9.fce975b8.js";import{e as x,i as F,p as u,r as L,f as b,o as l,c as a,L as B,W as N,v as S,j as i,Q as k,S as V,a as E,n as K,F as C,b as q,u as z}from"../app.88701f9d.js";const A={class:"epic-tree-node"},O=E("span",{class:"iconfont icon-zhankai"},null,-1),P=[O],R=x({name:"ETreeNode",__name:"treeNode",props:{record:{type:Object,required:!0}},setup(f){const e=f,o=i("slots",{}),t=i("expandedKeys"),m=i("treeProps"),p=i("selectedKeys"),h=i("handleSelect"),n=b(()=>{var r;return t.value.includes((r=e.record.id)!=null?r:"")}),y=x({setup(){return()=>{var s;var r;return k("span",{class:{text:!0,hover:m.hoverKey===e.record.id,checked:p.value.includes(e.record.id)},onClick:()=>h(e.record.id,e.record)},(s=(r=o["tree-node"])==null?void 0:r.call(o,e))!=null?s:k("span",{class:"text-padding"},{default:()=>{var d;var c;return[(d=e.record.label)!=null?d:(c=j.getComponentConfingByType(e.record.type))==null?void 0:c.defaultSchema.label,k("span",{class:"epic-node-type-text"},e.record.type)]}}))}}});function v(){const r=e.record.id;if(!r)return!1;t.value.includes(r)?t.value=t.value.filter(s=>s!==r):t.value.push(r)}function T(){var r;const s=e.record.id;if(!s||!((r=e.record.children)!=null&&r.length))return!1;t.value.push(s)}return T(),(r,s)=>{var c,d;const _=V("ETreeNode");return l(),a("li",A,[E("a",null,[(c=e.record.children)!=null&&c.length?(l(),a("span",{key:0,class:K(["icon-expanded",{expanded:n.value}]),onClick:v},P,2)):C("",!0),q(z(y))]),(d=e.record.children)!=null&&d.length?(l(),a("ul",{key:0,class:K(["epic-tree-sublist",{expanded:n.value}])},[(l(!0),a(B,null,N(e.record.children,g=>(l(),S(_,{key:g.id,record:g},null,8,["record"]))),128))],2)):C("",!0)])}}}),G={class:"epic-tree-main"},W=x({name:"ETree",__name:"tree",props:{options:{type:Array,default:()=>[]},hoverKey:{type:String,default:""},selectedKeys:{type:Array,default:()=>[]}},emits:["update:selectedKeys","node-click"],setup(f,{emit:e}){const o=f,t=F();u("slots",t);const m=L([]),p=b({get(){return o.selectedKeys},set(n){e("update:selectedKeys",n)}});function h(n,y){p.value=[n],e("node-click",{id:n,record:y})}return u("expandedKeys",m),u("selectedKeys",p),u("treeProps",o),u("handleSelect",h),(n,y)=>(l(),a("ul",G,[(l(!0),a(B,null,N(o.options,v=>(l(),S(R,{key:v.id,record:v},null,8,["record"]))),128))]))}});export{W as G};
