import{e as Q,j as g,r as b,f as k,o as u,c as r,a as t,b as C,q as y,u as w,L as T,W as j,n as V,O as B,m as q,D as I,E as O,Y as N}from"../app.88701f9d.js";import{R as W}from"./vuedraggable.umd-6a5b6da9.a81b27de.js";import{R,K as _,Q as D,L as Y,T as z}from"./index-b8b964c9.fce975b8.js";import"./commonjsHelpers-c5d32002.490f5bf3.js";const F={class:"epic-component-view flex flex-col"},G={class:"search-box px-10px pr-14px py-6px"},H=t("span",{class:"iconfont icon-yulan"},null,-1),J={class:"flex flex-1 overflow-auto"},P={class:"tabs-box"},X=["title","onClick"],A={class:"h-full flex-1 overflow-auto py-2 box-border"},M=["onClick"],Z={class:"text-center pt-42px text-gray-400"},oe=Q({__name:"index",setup($){const E=R.getComponent("input"),d=g("pageSchema"),p=g("designer"),v=R.getSchemaByGroup(),o=b(""),m={title:"\u5168\u90E8",list:[]},c=b(m),L=k(()=>[m,...v.value]),s=k(()=>{let a=c.value.list;if(c.value.title==="\u5168\u90E8"){const l=v.value.map(e=>e.list);a=[].concat(...l)}return o.value?a.filter(l=>{var e;return(e=l.label)==null?void 0:e.includes(o.value)}):a});function S(a){c.value=a}function U(a){s.value[a.oldIndex]=_({...N(s.value[a.oldIndex]),id:D()})}function K(a){var h;var l;const e=Y(d.schemas,(h=(l=p.state.checkedNode)==null?void 0:l.id)!=null?h:"root");if(!e)return!1;let{list:n,schema:i,index:f}=e;i.children&&!["row","tabs"].includes(i.type)&&(n=i.children,f=i.children.length-1);const x=_({...N(a),id:D()});n.splice(f+1,0,x),p.setCheckedNode(x),z.push(d.schemas,"\u63D2\u5165\u7EC4\u4EF6")}return(a,l)=>(u(),r("div",F,[t("div",G,[C(w(E),{placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u540D\u79F0",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),value:o.value,"onUpdate:value":l[1]||(l[1]=e=>o.value=e)},{prefix:y(()=>[H]),_:1},8,["modelValue","value"])]),t("div",J,[t("div",P,[(u(!0),r(T,null,j(L.value,(e,n)=>(u(),r("div",{class:V(["tab cursor-pointer truncate",{checked:c.value.title===e.title}]),key:n,title:e.title,onClick:i=>S(e)},B(e.title),11,X))),128))]),t("div",A,[C(w(W),q({modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e)},{group:{name:"edit-draggable",pull:"clone",put:!1},sort:!1,animation:180,ghostClass:"moving"},{"item-key":"id",class:"grid grid-cols-[auto_auto] px-10px gap-2",onEnd:l[3]||(l[3]=e=>U(e))}),{item:y(({element:e})=>[t("div",{class:"source-componet-item flex items-center truncate",onClick:n=>K(e)},[t("span",{class:V(["iconfont",e.icon])},null,2),t("div",null,B(e.label),1)],8,M)]),_:1},16,["modelValue"]),I(t("div",Z,"\u6CA1\u6709\u67E5\u8BE2\u5230\u7684\u7EC4\u4EF6",512),[[O,!s.value.length]])])])]))}});export{oe as default};
